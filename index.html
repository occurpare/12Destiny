<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="12 DICE - 5í„´ ì•ˆì— 12ì¹¸ì— ë„ë‹¬í•˜ì„¸ìš”! 156ê°œì˜ ë‹¤ì–‘í•œ ì´ë²¤íŠ¸ê°€ ìˆëŠ” ì£¼ì‚¬ìœ„ ë³´ë“œê²Œì„">
    <meta name="keywords" content="ì£¼ì‚¬ìœ„, ë³´ë“œê²Œì„, 12 DICE, dice game">
    <meta name="author" content="occurpare@naver.com">
    <title>12 DICE - 156 Events Edition</title>
    <link rel="stylesheet" href="style.css">
    
    <!-- ì–¸ì–´ íŒ© -->
    <script src="lang/ko.js"></script>
    <script src="lang/en.js"></script>
</head>
<body>
    <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="main-nav" id="mainNav">
        <div class="nav-brand">ğŸ² 12 DICE</div>
        <div class="nav-links">
            <a href="index.html" class="nav-link active" data-i18n="nav.game">ğŸ® ê²Œì„</a>
            <a href="pages/guide.html" class="nav-link" data-i18n="nav.guide">ğŸ“– ê°€ì´ë“œ</a>
            <a href="pages/faq.html" class="nav-link" data-i18n="nav.faq">â“ FAQ</a>
            <button class="lang-btn" id="langBtn" title="Change Language">ğŸŒ</button>
        </div>
    </nav>
    
    <!-- ì‹œì‘ í™”ë©´ ëª¨ë‹¬ -->
    <div class="intro-modal" id="introModal">
        <div class="intro-content">
            <div class="intro-header">
                <span class="intro-icon">ğŸ²</span>
                <h1 data-i18n="title">12 DICE</h1>
                <span class="intro-version" data-i18n="version">v15f - 156 Events</span>
            </div>
            
            <div class="intro-rules">
                <h2 data-i18n="rulesTitle">ğŸ“‹ ê²Œì„ ê·œì¹™</h2>
                <ul>
                    <li><strong data-i18n="rules.goal">ëª©í‘œ:</strong> <span data-i18n="rules.goalText">5í„´ ì•ˆì—</span> <span class="highlight-goal" data-i18n="rules.goalHighlight">12ì¹¸</span>ì— ë„ë‹¬í•˜ì„¸ìš”!</li>
                    <li><strong data-i18n="rules.dice">ì£¼ì‚¬ìœ„:</strong> <span data-i18n="rules.diceText">ê¸°ë³¸ 1~6, ì´ë²¤íŠ¸ë¡œ ë³€ê²½ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤</span></li>
                    <li><strong data-i18n="rules.events">ì´ë²¤íŠ¸:</strong> <span data-i18n="rules.eventsText">ë§¤ í„´ ë‹¤ì–‘í•œ ì´ë²¤íŠ¸ê°€ ë°œìƒí•©ë‹ˆë‹¤</span></li>
                    <li><strong data-i18n="rules.bypass">ìš°íšŒ ë£¨íŠ¸:</strong> <span data-i18n="rules.bypassText">12ì¹¸ ì´ˆê³¼ ì‹œ 3~6ì¹¸ ìš°íšŒë¡œê°€ ìƒì„±ë©ë‹ˆë‹¤</span></li>
                </ul>
            </div>
            
            <div class="intro-cats">
                <h2 data-i18n="categoriesTitle">ğŸ¯ ì´ë²¤íŠ¸ ì¹´í…Œê³ ë¦¬</h2>
                <div class="cat-grid">
                    <div class="cat-item positive">
                        <span class="cat-icon">âœ…</span>
                        <span class="cat-name" data-i18n="categories.positive.name">ê¸ì •ì </span>
                        <span class="cat-count" data-i18n="categories.positive.count">20ê°œ</span>
                    </div>
                    <div class="cat-item neutral">
                        <span class="cat-icon">âš–ï¸</span>
                        <span class="cat-name" data-i18n="categories.neutral.name">ì¤‘ë¦½ì </span>
                        <span class="cat-count" data-i18n="categories.neutral.count">20ê°œ</span>
                    </div>
                    <div class="cat-item negative">
                        <span class="cat-icon">âŒ</span>
                        <span class="cat-name" data-i18n="categories.negative.name">ë¶€ì •ì </span>
                        <span class="cat-count" data-i18n="categories.negative.count">38ê°œ</span>
                    </div>
                    <div class="cat-item despair">
                        <span class="cat-icon">ğŸ˜±</span>
                        <span class="cat-name" data-i18n="categories.despair.name">ì ˆë§</span>
                        <span class="cat-count" data-i18n="categories.despair.count">12ê°œ</span>
                    </div>
                    <div class="cat-item special">
                        <span class="cat-icon">â­</span>
                        <span class="cat-name" data-i18n="categories.special.name">íŠ¹ë³„</span>
                        <span class="cat-count" data-i18n="categories.special.count">12ê°œ</span>
                    </div>
                    <div class="cat-item blocker">
                        <span class="cat-icon">ğŸ›‘</span>
                        <span class="cat-name" data-i18n="categories.blocker.name">ë°©í•´</span>
                        <span class="cat-count" data-i18n="categories.blocker.count">44ê°œ</span>
                    </div>
                </div>
            </div>
            
            <div class="intro-tips">
                <h2 data-i18n="tipsTitle">ğŸ’¡ íŒ</h2>
                <ul>
                    <li data-i18n="tips.0">ì´ˆë°˜ì—ëŠ” <span class="tip-good">ì´ˆê¸° ì¥ì• ë¬¼</span> ì´ë²¤íŠ¸ê°€ ë§ì´ ë‚˜ì˜µë‹ˆë‹¤</li>
                    <li data-i18n="tips.1">ì¢…ë°˜ì—ëŠ” <span class="tip-bad">í´ë¦¬ì–´ ë°©í•´</span> ì´ë²¤íŠ¸ê°€ ê°•í•´ì§‘ë‹ˆë‹¤</li>
                    <li data-i18n="tips.2">ì£¼ì‚¬ìœ„ê°€ ë°”ë€Œë©´ ì „ëµì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤!</li>
                    <li data-i18n="tips.3">ì´ë²¤íŠ¸ íŒì—…ì„ í´ë¦­í•˜ë©´ ë¹ ë¥´ê²Œ ë„˜ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
                </ul>
            </div>
            
            <button class="intro-start-btn" id="startGameBtn" data-i18n="buttons.startGame">
                ğŸ® ê²Œì„ ì‹œì‘
            </button>
            
            <label class="intro-checkbox">
                <input type="checkbox" id="skipIntroCheckbox">
                <span data-i18n="buttons.dontShowAgain">ë‹¤ì‹œ ë³´ì§€ ì•Šê¸°</span>
            </label>
        </div>
    </div>

    <!-- ê²Œì„ ì»¨í…Œì´ë„ˆ -->
    <div class="game-container">
        <!-- ê²Œì„ í—¤ë” -->
        <div class="header">
            <div class="header-top">
                <h1>ğŸ² 12 DICE ğŸ²</h1>
                <button class="help-btn" id="helpBtn" title="ê²Œì„ ê·œì¹™">â“</button>
            </div>
            <div class="status-bar">
                <div class="turn-counter"><span data-i18n="status.turn">í„´:</span> <span id="currentTurn">1</span>/5</div>
                <div class="position"><span data-i18n="status.position">ìœ„ì¹˜:</span> <span id="currentPosition">0</span><span data-i18n="status.space">ì¹¸</span></div>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                        <span class="progress-text" id="progressText">0%</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ê²Œì„ ë³´ë“œ -->
        <div class="board" id="board">
            <!-- ë™ì ìœ¼ë¡œ ìƒì„± -->
        </div>

        <!-- ì£¼ì‚¬ìœ„ ì˜ì—­ -->
        <div class="dice-area">
            <div class="dice-display" id="diceDisplay">
                <span id="diceValue">?</span>
            </div>
            <div class="dice-info" id="diceInfo">
                <span class="dice-type" id="diceType" data-i18n="diceTypes.normal">ê¸°ë³¸ ì£¼ì‚¬ìœ„ (1~6)</span>
            </div>
        </div>

        <!-- í˜„ì¬ ìƒíƒœ ìš”ì•½ -->
        <div class="status-summary" id="statusSummary">
            <div class="summary-item">
                <span class="summary-label" data-i18n="status.distanceLeft">ğŸ¯ ë‚¨ì€ ê±°ë¦¬</span>
                <span class="summary-value" id="distanceLeft">12ì¹¸</span>
            </div>
            <div class="summary-item">
                <span class="summary-label" data-i18n="status.eventChance">ğŸ“Š ë°œë™ í™•ë¥ </span>
                <span class="summary-value" id="eventChance">92%</span>
            </div>
            <div class="summary-item">
                <span class="summary-label" data-i18n="status.eventCount">ğŸ“œ ì´ë²¤íŠ¸</span>
                <span class="summary-value" id="eventCount">0<span data-i18n="status.events">íšŒ</span></span>
            </div>
        </div>

        <!-- ê²Œì„ ë¡œê·¸ -->
        <div class="log-area" id="logArea">
            <div class="log-item system">
                <span class="developer-avatar">ğŸ‘¨â€ğŸ’»</span>
                <span class="log-text" data-i18n="messages.welcome">"ì•ˆë…•í•˜ì„¸ìš”! 5í„´ ì•ˆì— 12ì¹¸ì— ë„ë‹¬í•˜ë©´ ìŠ¹ë¦¬í•©ë‹ˆë‹¤!"</span>
            </div>
        </div>

        <!-- ì´ë²¤íŠ¸ ì˜ì—­ -->
        <div class="event-area hidden" id="eventArea">
            <div class="event-content" id="eventContent">
                <!-- ë™ì ìœ¼ë¡œ ë³€ê²½ -->
            </div>
            <div class="tap-area hidden" id="tapArea">
                <div class="tap-button" id="tapButton" data-i18n="messages.tapFast">ì—°íƒ€í•˜ì„¸ìš”!!</div>
                <div class="tap-progress">
                    <div class="tap-bar" id="tapBar"></div>
                </div>
            </div>
            <div class="choice-area hidden" id="choiceArea">
                <!-- ì„ íƒì§€ -->
            </div>
        </div>

        <!-- ë²„íŠ¼ ì˜ì—­ -->
        <div class="button-area">
            <button class="roll-button" id="rollButton" data-i18n="buttons.rollDice">ğŸ² ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°</button>
            <button class="history-btn" id="historyBtn" title="ì´ë²¤íŠ¸ ê¸°ë¡">ğŸ“œ ê¸°ë¡</button>
            <button class="restart-button hidden" id="restartButton" data-i18n="buttons.restart">ğŸ”„ ë‹¤ì‹œ ì‹œì‘</button>
        </div>

        <!-- ê²°ê³¼ í™”ë©´ -->
        <div class="result-screen hidden" id="resultScreen">
            <div class="result-content">
                <div class="result-icon" id="resultIcon">ğŸ‰</div>
                <div class="result-text" id="resultText" data-i18n="result.victory">ìŠ¹ë¦¬!</div>
                <div class="result-detail" id="resultDetail" data-i18n="result.congratulations">ì¶•í•˜í•©ë‹ˆë‹¤!</div>
                <div class="result-stats" id="resultStats"></div>
                <button class="result-button" id="resultButton" data-i18n="buttons.challengeAgain">ë‹¤ì‹œ ë„ì „</button>
            </div>
        </div>
    </div>

    <!-- ì´ë²¤íŠ¸ ê¸°ë¡ íŒ¨ë„ -->
    <div class="history-panel hidden" id="historyPanel">
        <div class="history-header">
            <h3 data-i18n="history.title">ğŸ“œ ì´ë²¤íŠ¸ ê¸°ë¡</h3>
            <button class="history-close" id="historyClose">âœ•</button>
        </div>
        <div class="history-list" id="historyList">
            <!-- ë™ì ìœ¼ë¡œ ìƒì„± -->
        </div>
    </div>
    
    <!-- í‘¸í„° -->
    <footer class="game-footer">
        <div class="footer-content">
            <div class="footer-brand">
                <span>ğŸ² 12 DICE</span>
                <span class="footer-copyright" data-i18n="footer.copyright">Â© 2026 12 DICE. All rights reserved.</span>
            </div>
            <div class="footer-links">
                <a href="pages/privacy.html" data-i18n="footer.legal.privacy">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
                <a href="pages/terms.html" data-i18n="footer.legal.terms">ì´ìš©ì•½ê´€</a>
                <a href="pages/cookies.html" data-i18n="footer.legal.cookies">ì¿ í‚¤ ì •ì±…</a>
            </div>
            <div class="footer-developer">
                <span data-i18n="footer.developer">ê°œë°œì</span>: <a href="mailto:occurpare@naver.com">occurpare@naver.com</a>
            </div>
        </div>
    </footer>

    <script src="game.js"></script>
    <script>
        // ==================== ì–¸ì–´ ì‹œìŠ¤í…œ ====================
        let currentLang = localStorage.getItem('currentLang') || 'ko';
        
        function setLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('currentLang', lang);
            const langPack = lang === 'ko' ? LANG_KO : LANG_EN;
            
            // data-i18n ì†ì„±ì„ ê°€ì§„ ëª¨ë“  ìš”ì†Œ ì—…ë°ì´íŠ¸
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                const value = key.split('.').reduce((obj, k) => obj && obj[k], langPack);
                if (value) {
                    if (typeof value === 'object') {
                        // ê°ì²´ì¸ ê²½ìš° ë‚´ë¶€ ì²˜ë¦¬
                    } else {
                        el.innerHTML = value;
                    }
                }
            });
            
            // HTML lang ì†ì„± ë³€ê²½
            document.documentElement.lang = lang;
            
            // ì–¸ì–´ ë²„íŠ¼ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            document.getElementById('langBtn').textContent = lang === 'ko' ? 'EN' : 'í•œ';
        }
        
        // ì–¸ì–´ ë²„íŠ¼ ì´ë²¤íŠ¸
        document.getElementById('langBtn').addEventListener('click', () => {
            setLanguage(currentLang === 'ko' ? 'en' : 'ko');
        });
        
        // ì´ˆê¸° ì–¸ì–´ ì„¤ì •
        setLanguage(currentLang);
        
        // ==================== ì¸íŠ¸ë¡œ ëª¨ë‹¬ ê´€ë¦¬ ====================
        const introModal = document.getElementById('introModal');
        const startGameBtn = document.getElementById('startGameBtn');
        const skipIntroCheckbox = document.getElementById('skipIntroCheckbox');
        const helpBtn = document.getElementById('helpBtn');
        const historyBtn = document.getElementById('historyBtn');
        const historyPanel = document.getElementById('historyPanel');
        const historyClose = document.getElementById('historyClose');
        
        // ì €ì¥ëœ ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸°
        if (localStorage.getItem('skipIntro') === 'true') {
            introModal.classList.add('hidden');
        }
        
        // ê²Œì„ ì‹œì‘
        startGameBtn.addEventListener('click', () => {
            if (skipIntroCheckbox.checked) {
                localStorage.setItem('skipIntro', 'true');
            }
            introModal.classList.add('hidden');
        });
        
        // ë„ì›€ë§ ë²„íŠ¼
        helpBtn.addEventListener('click', () => {
            introModal.classList.remove('hidden');
        });
        
        // ì´ë²¤íŠ¸ ê¸°ë¡ íŒ¨ë„
        historyBtn.addEventListener('click', () => {
            historyPanel.classList.toggle('hidden');
            updateHistoryPanel();
        });
        
        historyClose.addEventListener('click', () => {
            historyPanel.classList.add('hidden');
        });
        
        // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        function updateProgress() {
            const position = window.game ? window.game.position : 0;
            const goal = window.game ? window.game.goalPosition : 12;
            const progress = Math.min(100, Math.round((position / goal) * 100));
            
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = progress + '%';
            document.getElementById('distanceLeft').textContent = Math.max(0, goal - position) + (currentLang === 'ko' ? 'ì¹¸' : ' spaces');
            document.getElementById('eventCount').textContent = (window.game ? window.game.eventHistory.length : 0) + (currentLang === 'ko' ? 'íšŒ' : ' times');
            
            // ë°œë™ í™•ë¥  ì—…ë°ì´íŠ¸
            let chance = 92;
            if (position >= 10) chance = 99.5;
            else if (position >= 7) chance = 99;
            else if (position >= 4) chance = 96;
            document.getElementById('eventChance').textContent = chance + '%';
        }
        
        // ì´ë²¤íŠ¸ ê¸°ë¡ íŒ¨ë„ ì—…ë°ì´íŠ¸
        function updateHistoryPanel() {
            const historyList = document.getElementById('historyList');
            if (!window.game || !window.game.eventHistory) {
                historyList.innerHTML = '<div class="history-empty" data-i18n="history.empty">ì•„ì§ ì´ë²¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤</div>';
                return;
            }
            
            const categories = {
                'p': { name: currentLang === 'ko' ? 'ê¸ì •ì ' : 'Positive', class: 'positive', icon: 'âœ…' },
                'n': { name: currentLang === 'ko' ? 'ì¤‘ë¦½ì ' : 'Neutral', class: 'neutral', icon: 'âš–ï¸' },
                'e': { name: currentLang === 'ko' ? 'ë¶€ì •ì ' : 'Negative', class: 'negative', icon: 'âŒ' },
                'd': { name: currentLang === 'ko' ? 'ì ˆë§' : 'Despair', class: 'despair', icon: 'ğŸ˜±' },
                's': { name: currentLang === 'ko' ? 'íŠ¹ë³„' : 'Special', class: 'special', icon: 'â­' },
                'r': { name: currentLang === 'ko' ? 'ì´ˆê¸°' : 'Early', class: 'early', icon: 'ğŸš§' },
                't': { name: currentLang === 'ko' ? 'í„´ì••ë°•' : 'Turn Pressure', class: 'turnPressure', icon: 'â°' },
                'c': { name: currentLang === 'ko' ? 'ì €ì£¼' : 'Curse', class: 'curse', icon: 'ğŸ”®' },
                'b': { name: currentLang === 'ko' ? 'ë°©í•´' : 'Blocker', class: 'blocker', icon: 'ğŸ›‘' },
                'bp': { name: currentLang === 'ko' ? 'ìš°íšŒ' : 'Bypass', class: 'bypass', icon: 'ğŸ”„' }
            };
            
            // ì´ë²¤íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì´ë¦„ ì°¾ê¸°
            const eventLib = window.game.getEventLibrary();
            const allEvents = [
                ...eventLib.positive, ...eventLib.neutral, ...eventLib.negative,
                ...eventLib.despair, ...eventLib.special, ...eventLib.early,
                ...eventLib.turnPressure, ...eventLib.curse, ...eventLib.blocker,
                ...eventLib.bypass
            ];
            
            let html = '';
            const history = window.game.eventHistory;
            
            if (history.length === 0) {
                html = '<div class="history-empty">' + (currentLang === 'ko' ? 'ì•„ì§ ì´ë²¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤' : 'No events yet') + '</div>';
            } else {
                history.forEach((id, index) => {
                    const event = allEvents.find(e => e.id === id);
                    const prefix = id.startsWith('bp') ? 'bp' : id.charAt(0);
                    const cat = categories[prefix] || categories['n'];
                    
                    html += `
                        <div class="history-item ${cat.class}">
                            <span class="history-icon">${event ? event.icon : 'â“'}</span>
                            <span class="history-name">${event ? event.name : id}</span>
                            <span class="history-turn">${currentLang === 'ko' ? 'í„´' : 'Turn'} ${index + 1}</span>
                        </div>
                    `;
                });
            }
            
            historyList.innerHTML = html;
        }
        
        // ê²Œì„ ì—…ë°ì´íŠ¸ í›…
        const originalUpdateStatus = Game.prototype.updateStatus;
        Game.prototype.updateStatus = function() {
            originalUpdateStatus.call(this);
            updateProgress();
        };
        
        const originalAddLog = Game.prototype.addLog;
        Game.prototype.addLog = function(type, msg) {
            originalAddLog.call(this, type, msg);
            updateHistoryPanel();
        };
        
        // ì´ˆê¸° ì§„í–‰ë¥  ì„¤ì •
        setTimeout(updateProgress, 100);
    </script>
</body>
</html>